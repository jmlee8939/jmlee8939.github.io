---
title: 내 돈은 어디로부터 나와서 어디로 가는 걸까?
excerpt: 국내 거시 경제 지표를 통한 경기 순환 사이클 분석
categories: Study
permalink: /Study/macrowave_analysis
header:
  teaser: https://github.com/jmlee8939/jmlee8939.github.io/blob/master/assets/images/macroeconomics/business_cycle_clock.png?raw=true
tags:
  - 경제
  - 공공데이터
  - 데이터시각화
---
## Intro

##### ***"거인의 어깨에 올라서서 더 넓은 세상을 바라보아라 - 아이작 뉴턴"***

사회생활을 하고 수입이 생기게 되면서, 내가 번 돈은 어디로 부터 왔으며, 어디로 사라져버리는가에 대한 질문을 꾸준히 하게 되었고 자연스럽게 경제에 관심을 가지게 되었다. 눈떠보면 사라져 있는 월급이 도대체 어디로 흘러 들어가는 걸까. 평범한 공대생으로 경제를 깊이 배워볼 수 있는 기회가 따로 없었기에 몇몇 쉬운 경제책을 틈틈히 겉핧기하고 있다. 그 중 가장 감명 깊었던 책은 "브라질에 비가 내리면 스타벅스 주식을 사라" 이다. 이 책의 저자이자 트럼프의 무역 책사이기도 한 피터 나바로는 이 책을 통해 거시 경제 지표를 통한 매크로 투자법을 소개하고 있다. 시류의 거대한 흐름에 올라타서 딸깍하는 것 만큼 효율적인 투자 방법이 없지 않을까.

## 거시 경제 지표

기획재정부의 시사경제용어사전에는 "국민 경제 전체의 움직임을 경제지표. 국민소득, 물가, 국제수지, 실업률, 환율, 통화증가율, 이자율 등이 여기에 속한다." 라고 거시 경제 지표를 정의하고 있다. 쉽게 생각해서 한 나라의 경제적 분위기? 정도로 이해했다. 기업, 개인, 국가 등이 지금 또는 미래의 상황을 어떻게 바라보고 있는지 어떤 제스쳐들을 하려고 하는지 파악 한다면 내 돈이 앞으로 어디로 흘러 갈지 알 수 있겠지.

"브라질에 비가 내리면 스타벅스 주식을 사라" 책에서는 아래와 같은 거시 경제 지표로 아래 지표들을 제시하고 있다.

**인플레이션** 
- 소비자물가지수(CPI), 생산자물가지수(PPI), 고용비용지수(ECI)
**불황**
- 고용보고서, 소비자 신뢰도, 소매 판매
**경제 성장과 경기 순환** 
- GDP, 자동차 트럭 판매, 주택 착공과 건축 비용 지출, S&P의 DRI 예측
**생산성**
- 생산성과 비용
**재정적자**
- 미 재무부 예산보고서
**무역적자**
- 상품 무역수지, 수입 수출 가격
**행정부 : 규제, 과세, 반독점** 
- 각종 신문, 뉴스
**사회적 변동**
- 블룸버그, 이코노미스트
**기술적 변화**
- 엑티브 트레이더, 인디비주얼 인베스터, 레드 헤링

처음 들어보는 지표가 많다. 🤨 
## 경기 사이클

그래서 지금 들어가? 말아? 친구들과 경제 이야기를 하다보면 항상 이 말로 끝난다. 그래 물들어왔을 때 노저어야지. 근데 물들어온걸 어떻게 알 수 있냐 말이지. 출렁이는 거시 경제 지표들의 거동을 통해서 현재 경기 사이클이 어느 위치에 놓여있는지 알아보는 것이 먼저다. 

경기 순환은 다음과 같이 '회복', '확장', '둔화', '위축' 4가지 국면으로 크게 나뉜다고 한다. 수학적으로 생각하면 미분값의 부호와 2차 미분값의 부호에 따라서 4가지로 나뉘고, 각 국면 경계는 극점과 변곡점이다. 물리적으로 생각하면 속도의 방향과 힘의 방향에 따라 구분된다고 볼 수 도 있겠다. 어떻게 보면 참 단순한 구분인데, 단순한 구조지만 실제 현실에서 일어나는 이 파동의 진폭과 주기를 아무도 제대로 맞출 수 없다는 게 참 재미있는 점이다. 

<p align="center">
<img src= "https://github.com/jmlee8939/jmlee8939.github.io/blob/master/assets/images/macroeconomics/business_cycle.png?raw=true" width = 700 height = 400>
</p>

### 경기 순환 시계

통계청에서 경기란 "국민경제의 총체적인 활동수준을 의미하는 것으로서, 생산·소비·투자·고용 등 실물부문과 통화의 수급·금리 등 금융부문, 수출·입 등의 대외부문 활동 등을 종합한 거시적 흐름입니다." 라고 한다. 이러한 경기는 4가지 국면이 끊임 없이 순환된다. 대한민국 통계청에서는 다음과 같이 10개 주요 지표들의 전월 대비 거동을 시각화해서 현재의 경기 순환이 어떤 국면에 와 있는지를 보여주는 웹페이지를 운영하고 있다. 위 경기 순환 국면 파동에서 보여지는 기울기(이전 분기와의 차이), 진폭(평균과의 거리)을 활용하여 현재 경기가 어떤 시기에 와 있는지 아주 보기 쉽게 만들어 둔 좋은 시각화 예시를 찾았다.

[KOSIS 경기순환시계](https://kosis.kr/visual/bcc/index/index.do?language=kor)
<p align="center">
<img src= "https://github.com/jmlee8939/jmlee8939.github.io/blob/master/assets/images/macroeconomics/business_cycle_clock.png?raw=true" width = 600 height = 400>
</p>
24년 연말, 대한민국 경제 -> 하강? 😭

## 경기 순환에 따른 주요 자산의 변동

***"백문이 불여일견. Seeing is believing."***

기존의 경기 순환시계의 지표들에다가 부동산, 주식 등의 거동을 함께 보면서 해당 자산의 가치들이 사이클에 따라서 어떻게 거동하는지 같이 두고 보고 싶다는 생각이 들었다. 경기 순환을 나타내는 위 지표들과 함께 주요 자산들(주식, 부동산, M2통화량) 등의 거동도 함께 두고 보고 싶다는 생각이 들었다. 
### 한국은행 Open API

 데이터를 쉽게 얻을 수 있는 Open API 를 제공하는 사이트부터 찾아보았다. 우리의 친구 Chat GPT 에 물어보니 여러 좋은 사이트들을 추천해주었다. (한국은행 ECOS, 국가통계포털 KOSIS, 세인트루이스 연방준비은행 FRED 등..). 그 중에서 한국은행 Open API 를 활용해서 우리나라의 거시경제 지표를 들춰보았다.

[ECOS 한국은행 API 서비스](https://ecos.bok.or.kr/api/#/)
한국 경제의 여러가지 지표를 API 로 제공함으로서, 다양한 경제 관련 어플리케이션을 개발을 장려하기 위해 한국은행에서 만든 API 서비스이다. 서비스를 사용하기 위해서는 가입후 api key를 받아서 사용하면 되고, 1분에 100회정도 까지 호출 가능하다.
###  ECOS API Loader

막상 API 를 활용하려고 하니 몇 가지가 좀 불편했다.
- 내가 얻고 싶은 데이터의 통계 코드를 검색해야 하는 점.
- 필요한 데이터의 시간 간격 (일, 주, 년) 및 조회 가능한 기간을 알아야 하는 점.

그래서, 검색 가능한 코드와 세부 정보들을 저장해두고 검색해서 쉽게 불러올 수 있도록 하는 API 로더가 필요하다고 생각했다. (나를 위해) 간단하게 Python 기반 ECOS API Loader 코드를 만들어 보았다.

Github :  [ECOS API Loader](https://github.com/jmlee8939/ecos_api_loader)

위 코드는 "ecosloader" package 로 만들어 pypi 에 등록했다.

```pyhon
pip install ecosloader
``` 

### 주요 경제 지표의 거동 (2008~2024)

위 지표들을 실제 데이터를 한국은행 ECOS API Loader 를 활용해서 불러오고 각 데이터를 분기별 평균(파란색)과 연도별 Moving average(주황색) 으로 전처리하였다. 

<p align="center">
<img src= "https://github.com/jmlee8939/jmlee8939.github.io/blob/master/assets/images/macroeconomics/output.png?raw=true" width = 700 height = 700>
</p>

코로나 이후 2020년~2022년 사이에 집값과, 주식이 많이 올랐고 이후로 꽤 조정되는 국면을 보인다. 거의 모든 매체에서 우리나라의 경제가 위기라는 이야기 많이 나오고 있는데 생각보다 수출은 많이 회복된 걸로 보이긴 한다. (높아진 환율때문일 것 같긴 하지만). 경기 전망 및 건설기성액 지표로 보았을 때, 소비 심리나 건설 경기가 얼어 붙은 것은 맞는 것 같다.

### 경기 지표 (2024)

위 경제 지표들 중에서 광공업생산지수, 서비스업생산지수, 상품판매액지수, 설비투자지수, 건설기성액, 수출액, 수입액, 취업자수, 기업경기조사, 경기전망의 2024년 데이터를 확인해 보았다.
*(파란색) 월별 데이터, (주황색) 분기별 평균, (초록색) 1년 평균 추세*

<p align="center">
<img src= "https://github.com/jmlee8939/jmlee8939.github.io/blob/master/assets/images/macroeconomics/output3.png?raw=true" width = 700 height = 700>
</p>

### 경기 순환 시계 (2024.4Q)

위 데이터를 가지고 2024 4분기(2024.10~2024.12)의 각 지표별 경기 순환 시계를 시각화하는 plot 을 만들어 보았다. 각 지표들의 스케일이 달라서 (-1, 1) 로 스케일링을 진행하였고, 부호가 바뀌지 않도록 음의 값은 음의 최대치의 절대값으로, 양의 값은 양의 최대치의 절대값으로 나누었다. 

<p align="center">
<img src= "https://github.com/jmlee8939/jmlee8939.github.io/blob/master/assets/images/macroeconomics/output2.png?raw=true" width = 600 height = 450>
</p>


24년 4분기는 지표들이 가파르게 변한 것으로 보인다. 광공업 서비스업 생산지수, 상품 판매액지수 등 전반적으로 기업경기가 좋아지고 있어 보인다. 하지만 수출, 수입이 줄고 설비투자도 줄어서 앞으로도 계속 기업 경기가 좋을지는 잘 모르겠다. 건설 경기와 체감 경기가 하강 국면인 것은 확실해 보인다. 뉴스에서 "어렵다. 어렵다." 하는게 괜히 하는 말은 아닌가 보다.
### 지표 별 순환의 상관 관계

모든 경제 지표가 같은 순환의 위치에 놓이는 것은 아니다. 순환 하는 지표의 주기들 사이에 분명 선후 관계가 있을 것이다. 어떤 지표에 대해서 선행하는 지표, 동행하는 지표, 후행하는 지표 모두 존재할 것이다. 지표의 순환 지점이 얼마나 가까이에 있는지 확인해 본다면 비슷한 주기로 움직이는 지표들을 확인 할 수 있을 것이라고 생각했다. 2008년 이후의 데이터를 활용해서 경기 순환 시계 내 지표들의 위치가 평균적으로 얼마나 가까이에 있는지를 히트맵을 통해서 확인해 보았다. 밝을 수록 거리가 지표들간의 순환시계에서의 거리가 가깝고 어두울 수록 멀다.

<p align="center">
<img src= "https://github.com/jmlee8939/jmlee8939.github.io/blob/master/assets/images/macroeconomics/output4.png?raw=true" width = 600 height = 500>
</p>


위는 순환시계 위의 거리를 나타낸 히트맵이고, 지표들이 같은 시점에 얼마나 같은 사분면(상승, 둔화, 회복, 하강) 위에 존재 했는지에 대해서도 히트맵을 그려보았다.

<p align="center">
<img src= "https://github.com/jmlee8939/jmlee8939.github.io/blob/master/assets/images/macroeconomics/output5.png?raw=true" width = 600 height = 500>
</p>


경제에 대해서는 잘 모르기에, 지표들이 어떤 인과관계를 갖고 움직이는지 깊이 알 수는 없지만, 어떤 상관관계를 가지고 있는지는 위 결과 값을 통해서 확인이 가능하다.

1) 우리나라는 수출 효자는 역시 제조업?
   - 광공업 생산지수와 수출액의 거동이 가장 유사하다는 것 가장 눈에 띈다. 
2) 통화 정책에 가장 민감한 부동산?
   - 통화량의 거동과 주택가격의 거동의 유사도가 매우 높다.
   - 통화 정책과 통화량에 따라서 주택 가격의 방향성이 결정되는 것으로 보인다.
3) 주식과 소비자기대지수
   - 순환 시계 내의 거리로 보았을 때 주식과 소비자 기대지수의 거동이 유사한 것으로 보인다.
   - 기대감이 주식 가격에 반영되는 건지, 오르는 주식 가격이 기대감에 영향을 주는 건지는 잘 모르겠다. 😄 

### 주택 가격과 KOSPI 지수에 영향을 미치는 지표의 순환

그럼 어떤 지표가 어느 순환의 위치에 있을 때 주택 가격과 KOSPI 지수가 어떻게 움직일까? 이 질문에 대한 답을 찾기 위해서 각 지표들의 좌표를 독립변수로 하여 주택 가격 상승과 KOSPI 지수 상승을 종속변수로 하는 Linear Regression 모형을 학습하고, 그 coef 를 통해 어떤 관계를 가지고 있는지 확인해보았다. 물론, 다중 공선성 문제, 또한 경기 순환 시계의 좌표가 매우 상대적인 값인 부분, Time window(나는 한 분기로 설정)에 따라 달라지는 거동 등 coef 를 통해서 정확하게 어떤 관계를 갖고 있다고 규정하긴 어렵다. 하지만 어떤 지표들의 위치에 따라서 양 음의 방향성 정도를 이해하는 데에는 활용할 수 있을 것이라고 생각하였다.

Linear Regression 의 학습 결과는 다음과 같다.
==R^2 = 0.544== 완전히 설명력을 갖고 있다고 하긴 어렵지만 방향성에 대한 관계를 보여주기엔 충분한 것 같다.

<p align="center">
<img src= "https://github.com/jmlee8939/jmlee8939.github.io/blob/master/assets/images/macroeconomics/output6.png?raw=true" width = 700 height = 500>
</p>

애초에 좌표 데이터의 범위가 (-1, 1) 이기 때문에 Coef 를 바로 Feature Importance 로 바로 보면 될 것 같다. Feature Importance 가 높은 지표들 1~2개에 대해서만 들여다 보았다.

1) 주택매매가격지수의 증가
	- 상품판매액지수의 "둔화" 국면
	- 서비스업생산지수의 "회복" 국면
	- 수출액의 "둔화" 국면
2) KOSPI 지수의 증가
	- 수입액의 "회복" 국면
	- 설비투자 "둔화" 국면
	- 건설기성액 "회복" 국면

주택 매매가격지수는 수출, 판매 경기가 정점을 찍고 둔화하는 시점에 상승을 하는 것으로 보인다. 경기가 가라 앉을 때 경기 부양을 위한 통화 정책이 이루어지고 이것이 주택가격 상승에 영향을 미치지 않을까.  KOSPI 지수는 음... 잘 모르겠다. 🧐

## Wrap up

세상의 돈의 흐름을 파악해서 딸깍하는 것이 얼마나 어려운 일인지 깨달았다. (워렌 버핏이 왜 그렇게 많은 돈을 버시는 지도...). 잘 모르는 분야에 대한 데이터 분석을 해보면서 역시 깊은 데이터 분석을 위해서는 도메인지식이 반드시 필요하다는 사실을 절실히 깨달았다. 그래도 이번 경험이 경제 여러 지표들의 의미를 이해하고 그 관계에 대해서 공부해보게 된 좋은 계기가 된 것 같다. 앞으로 투자 관련된 지식이나 경제 관련 뉴스를 볼 때 좀 더 관심을 깊게 가지고 볼 수 있을 것 같다. 여전히 앞으로 내 돈이 어디로 흘러들어가게 될지, 또 어디로 흘러들어가도록 해야 할지 명확하게 알 수 없지만 어디로 내 돈이 빨려 들어갔는지 어렴풋이 이해할 수 있게 되었다. 